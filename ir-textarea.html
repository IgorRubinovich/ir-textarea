<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../iron-icons/image-icons.html">
<link rel="import" href="../iron-icons/editor-icons.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../io-menu/io-menu.html">

<link rel="import" href="./commands.html">

<script src="../interact/interact.js"></script>

<!-- 
@license
Copyright (c) 2015 Igor Rubinovich <igor.rubinovich@gmail.com>. All rights reserved.
This code may only be used under the MIT license found at http://opensource.org/licenses/MIT
-->
<!--
# ir-textarea

**A wysiwyg editor custom component for Polymer 1.0**

Just what it says.

## To-do
- All of it
- Docs
- Demo

## Contribution
Issues and pull requests are most welcome. Fork it [here](https://github.com/IgorRubinovich/ir-textarea).

## License
[MIT](http://opensource.org/licenses/MIT) 


@group GUI Elements
@element ir-textarea
@homepage http://igorrubinovich.github.io/ir-textarea/
@demo demo/index.html
-->
<dom-module id="ir-textarea">
  <style>
    :host {	
      display: block;
    }
	paper-button {
		border-radius : 50px;
		padding : 0;
	}
	iron-icon-button {
		width : 15px;
	}
	#editor {
		min-height : 200px;
		margin-top  : 10px;
		padding : 5px;
		border : 1px solid #afafaf;
		display : block
	}
	
	toremove {
		display : none;
	}
	
	.separator {
		width : 2px;
		height : 20px;
		display : inline-block;
		background : #eee;
	}
	
	#htmlTextArea {
		width : 100%;
		height : 300px
	}
  </style>
  <template>
	<div>
		<paper-tabs selected="{{ viewMode }}">
			<paper-tab>WYSIWYG</paper-tab>
			<paper-tab>HTML</paper-tab>
		</paper-tabs>
	</div>
	<iron-pages id="pages" selected="{{ viewMode }}">
		<div>
			<div id="toolbar">
				<template is="dom-repeat" items="{{ toolbarButtons }}">
					<template is="dom-if" if="{{ item }}">
						<template is="dom-if" if="{{ !item.icon }}">
							<paper-button raised on-mousedown="execCommand" cmd-def="{{ item }}">{{ item.cmd }}</paper-button>
						</template>
						<template is="dom-if" if="{{ item.icon }}">
							<paper-icon-button raised on-mousedown="execCommand" icon="{{ item.icon }}" cmd-def="{{ item }}" alt="{{ item.cmd }}"></paper-button>
						</template>
					</template>
					<template is="dom-if" if="{{ !item }}">
						<span class="separator"></span>
					</template>
				</template>
			</div>
			<div>
				<div id="editor" on-contextmenu="contextMenuShow" on-keyup="_updateValue" contenteditable>
					<content></content>
				</div>
			</div>
		</div>
		<div>
			<textarea id="htmlTextArea" value="{{ value }}"></textarea>
		</div>
	</iron-pages>
	<io-menu id="contextMenu" listener="contextmenu">
		
	</io-menu>
	<toremove>
		<div id="selectionEditor" contenteditable>
		</div>
		<p>
			Value: <span>{{ value }}</span>
		</p>
		<p>
			Offset: <span>{{ selection.caretOffset }}</span>
		</p>
		<p>
			Range: <span>{{ range }}</span>
		</p>
		<paper-button on-click="setSelection">select 5 chars</paper-button>
	<toremove>
  </template>
</dom-module>
<script src="ir-textarea.js"></script>
